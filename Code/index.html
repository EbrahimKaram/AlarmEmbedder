<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Recommended meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <!-- PyScript CSS -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">


    <!-- This script tag bootstraps PyScript -->
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <!-- for splashscreen -->
    <style>
        #loading {
            outline: none;
            border: none;
            background: transparent
        }
    </style>
    <script type="module">
        const loading = document.getElementById('loading');
        
        addEventListener('py:ready', () => loading.close());
        //await pyodide.loadPackage("micropip");
        //const micropip = pyodide.pyimport("micropip");
        //await micropip.install("snowballstemmer");
        loading.showModal();
    </script>

    <title>The Alarm Embedder</title>
    <link rel="icon" type="image/png" href="./assets/favicon.png" />

    <!-- bokeh scripts -->
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.2.2.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.2.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.2.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>

    <!-- panel scripts -->
    <script defer src="https://cdn.jsdelivr.net/npm/@holoviz/panel@1.3.1/dist/panel.min.js"></script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@holoviz/panel@1.3.1/dist/bundled/material-components-web@7.0.0/dist/material-components-web.min.js"></script>
</head>

<body>
    <dialog id="loading">
        <h1>Loading...</h1>
    </dialog>


    <p> From ignition, you would need to import the tags from OPCUA. You would then to need to export a json file.
        That Json file is what you upload here to convert the files. 
        Please also insert the FABname this will be used as the display path<br>

        <label for="fname">The name of the FAB</label><br>        
        <input type="text" id="fab_name" name="fname" value="FAB2500"><br>
        
        <input type="checkbox" id="is_RSS" name="vehicle1" value="true">
        <label for="is_RSS"> Is this an RSS (instead of an LSS)</label><br>

          <input type="checkbox" id="is_SSC" name="vehicle1" value="true">
        <label for="is_SSC"> Is this an SSC (instead of a FAB)</label><br>
        
        <input type="file" id="file-upload" accept=".json"><br>
        <button id="upload">Upload and embed alarms</button>
    </p>

    <p>
        Download the new json File after uploading the json file and clicking upload <br>
        <button id="download">Click to Download</button>
    </p>



    <section class="pyscript">
        <div id="simple_app"></div>
        <script type="py" src="./main.py" config="./pyscript.toml" terminal></script>
    </section>
</body>

</html>